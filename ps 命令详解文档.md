---

# `ps` 命令详解文档

---

## 目录
1. **概述**
2. **常用选项详解**
3. **常见字段解释**
4. **示例命令**
5. **扩展用法**
6. **总结**

---

## 1. 概述
`ps`（Process Status）是 Linux/Unix 系统中用于查看当前进程状态的命令。通过不同的选项组合，可以灵活地显示进程的详细信息，如进程 ID（PID）、CPU/内存使用率、启动时间等。

---

## 2. 常用选项详解

### **基础选项**
| 选项              | 描述                                                         |
| ----------------- | ------------------------------------------------------------ |
| `a`               | 显示所有用户的进程（包括其他用户的进程）。                   |
| `u`               | 以用户友好的格式显示进程信息，包含 CPU、内存使用率等详细数据。 |
| `x`               | 显示没有控制终端的进程（如后台服务）。                       |
| **组合 `ps aux`** | 综合 `a`、`u`、`x`，显示系统中所有进程的详细信息。           |

---

### **标准选项（POSIX 兼容）**
| 选项        | 描述                                                   |
| ----------- | ------------------------------------------------------ |
| `-e`        | 等价于 `a` 和 `x` 的组合，显示所有进程。               |
| `-f`        | 显示完整格式的进程信息（包括 UID、PPID、启动时间等）。 |
| `-l`        | 显示长格式的进程信息（包含优先级、状态等）。           |
| `-o`        | 自定义输出字段，例如：`ps -o pid,cmd,%cpu`。           |
| `-p <PID>`  | 指定进程 ID 查找进程，例如：`ps -p 1234`。             |
| `-C <NAME>` | 按命令名查找进程，例如：`ps -C nginx`。                |

---

### **BSD 风格选项**
| 选项 | 描述                                                         |
| ---- | ------------------------------------------------------------ |
| `c`  | 显示命令的基名（去掉路径和参数），例如：`/usr/bin/python` → `python`。 |
| `H`  | 显示线程信息（进程的父子关系）。                             |
| `T`  | 显示当前终端的所有进程。                                     |

---

### **杂项选项**
| 选项            | 描述                                                         |
| --------------- | ------------------------------------------------------------ |
| `--forest`      | 以树状结构显示进程的父子关系。                               |
| `--sort=FIELD`  | 按指定字段排序，例如：`ps aux --sort=-%cpu`（按 CPU 使用率降序）。 |
| `-–ppid <PPID>` | 按父进程 ID 查找子进程。                                     |

---

## 3. 常见字段解释
在 `ps` 输出中，常见的字段含义如下：

| 字段        | 含义                                                         |
| ----------- | ------------------------------------------------------------ |
| **USER**    | 进程所属的用户。                                             |
| **PID**     | 进程 ID（Process ID）。                                      |
| **%CPU**    | 进程占用的 CPU 百分比。                                      |
| **%MEM**    | 进程占用的物理内存百分比。                                   |
| **VSZ**     | 虚拟内存大小（单位 KB）。                                    |
| **RSS**     | 常驻内存大小（单位 KB）。                                    |
| **TTY**     | 终端设备（`?` 表示无终端关联）。                             |
| **STAT**    | 进程状态：`R`（运行中）、`S`（睡眠）、`Z`（僵尸）、`D`（不可中断睡眠）。 |
| **START**   | 进程启动时间。                                               |
| **TIME**    | 进程累计使用的 CPU 时间。                                    |
| **COMMAND** | 启动进程的命令及参数。                                       |

---

## 4. 示例命令
### **基础用法**
```bash
# 查看所有进程的详细信息
ps aux

# 查找名为 "nginx" 的进程
ps aux | grep nginx

# 按 CPU 使用率排序
ps aux --sort=-%cpu

# 显示进程的树状结构
ps aux --forest
```

### **自定义输出**
```bash
# 只显示 PID、命令和 CPU 占用率
ps -eo pid,cmd,%cpu

# 查找指定 PID 的进程
ps -p 1234

# 按命令名查找进程（如 "nginx"）
ps -C nginx
```

---

## 5. 扩展用法
### **结合管道操作**
```bash
# 查找并终止指定进程（需谨慎使用）
ps aux | grep "nginx" | grep -v grep | awk '{print $2}' | xargs kill
```

### **监控进程资源**
```bash
# 持续监控 CPU 使用率最高的进程（每秒刷新）
watch -n 1 "ps aux --sort=-%cpu | head -n 10"
```

---

## 6. 总结
`ps` 是系统管理中不可或缺的工具，其核心功能是通过灵活的选项组合快速定位和分析进程。常用组合包括：

- **`ps aux`**：查看所有进程的详细信息。
- **`ps aux | grep <服务名>`**：查找特定服务的进程。
- **`ps -C <命令>`**：按命令名快速筛选进程。
